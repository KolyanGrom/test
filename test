<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>–ö–∞—Ç–∞–ª–æ–≥ —Ç–æ–≤–∞—Ä–æ–≤</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    }

    body {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      min-height: 100vh;
      padding: 20px;
    }

    .container {
      max-width: 800px;
      margin: 0 auto;
      padding: 20px;
    }

    .header {
      text-align: center;
      margin-bottom: 30px;
      padding: 20px;
      background: rgba(255, 255, 255, 0.1);
      border-radius: 20px;
      backdrop-filter: blur(10px);
    }

    .products {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
      gap: 20px;
      margin-bottom: 30px;
    }

    .product-card {
      background: rgba(255, 255, 255, 0.15);
      border-radius: 15px;
      padding: 20px;
      transition: transform 0.3s;
      cursor: pointer;
    }

    .product-card:hover {
      transform: translateY(-5px);
      background: rgba(255, 255, 255, 0.25);
    }

    .product-image {
      width: 100%;
      height: 200px;
      object-fit: cover;
      border-radius: 10px;
      margin-bottom: 15px;
    }

    .product-title {
      font-size: 18px;
      font-weight: bold;
      margin-bottom: 10px;
    }

    .product-price {
      color: #4ade80;
      font-size: 20px;
      font-weight: bold;
    }

    .btn {
      background: linear-gradient(45deg, #4ade80, #22d3ee);
      color: white;
      border: none;
      padding: 15px 30px;
      border-radius: 12px;
      font-size: 16px;
      font-weight: bold;
      cursor: pointer;
      width: 100%;
      transition: all 0.3s;
    }

    .btn:hover {
      transform: scale(1.05);
      box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
    }

    .cart-counter {
      position: fixed;
      bottom: 100px;
      right: 20px;
      background: #ef4444;
      color: white;
      width: 50px;
      height: 50px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      font-size: 20px;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
    }
  </style>
</head>
<body>
<div class="container">
  <div class="header">
    <h1>üé® –ö–∞—Ç–∞–ª–æ–≥ —Ç–æ–≤–∞—Ä–æ–≤</h1>
    <p>–í—ã–±–µ—Ä–∏—Ç–µ —Ç–æ–≤–∞—Ä—ã –¥–ª—è –∑–∞–∫–∞–∑–∞</p>
    <div id="user-info" style="margin-top: 10px; font-size: 14px; opacity: 0.8;"></div>
  </div>

  <div class="products" id="products-container">
    <!-- –¢–æ–≤–∞—Ä—ã –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–µ–Ω—ã —á–µ—Ä–µ–∑ JavaScript -->
  </div>

  <button class="btn" onclick="sendOrderToBot()">üõí –û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑</button>
</div>

<div id="cart-counter" class="cart-counter" style="display: none;">0</div>

<script>
  // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Telegram Web App
  const tg = window.Telegram.WebApp;

  // –†–∞—Å—à–∏—Ä—è–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ –≤–µ—Å—å —ç–∫—Ä–∞–Ω
  tg.expand();

  // –ü–æ–ª—É—á–∞–µ–º –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  const user = tg.initDataUnsafe.user;

  // –û—Ç–æ–±—Ä–∞–∂–∞–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ
  if (user) {
    document.getElementById('user-info').innerHTML = `
                üë§ ${user.first_name} ${user.last_name || ''}
                @${user.username || '–±–µ–∑ username'}
            `;
  }

  // –ú–∞—Å—Å–∏–≤ —Ç–æ–≤–∞—Ä–æ–≤
  const products = [
    {
      id: 1,
      name: "–ù–∞–±–æ—Ä –¥–ª—è –º–∞–Ω–∏–∫—é—Ä–∞ Premium",
      price: 2490,
      image: "https://images.unsplash.com/photo-1604654894610-df63bc536371?w=400&h=300&fit=crop"
    },
    {
      id: 2,
      name: "–õ–∞–∫ —Å—Ç–æ–π–∫–∏–π 12 –¥–Ω–µ–π",
      price: 890,
      image: "https://images.unsplash.com/photo-1586023492125-27b2c045efd7?w-400&h=300&fit=crop"
    },
    {
      id: 3,
      name: "–ì–µ–ª—å-–ª–∞–∫ —Å –±–ª–µ—Å—Ç–∫–∞–º–∏",
      price: 1250,
      image: "https://images.unsplash.com/photo-1611591437281-460bfbe1220a?w=400&h=300&fit=crop"
    },
    {
      id: 4,
      name: "–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–∞—è –ø–∏–ª–∫–∞",
      price: 450,
      image: "https://images.unsplash.com/photo-1607779097040-9e6bde98e8f8?w=400&h=300&fit=crop"
    },
    {
      id: 5,
      name: "–ú–∞—Å–ª–æ –¥–ª—è –∫—É—Ç–∏–∫—É–ª—ã",
      price: 690,
      image: "https://images.unsplash.com/photo-1596703923538-b6d4bb0a44ea?w=400&h=300&fit=crop"
    },
    {
      id: 6,
      name: "–ë–∞–∑–∞ –∏ —Ç–æ–ø –ø—Ä–µ–º–∏—É–º",
      price: 1890,
      image: "https://images.unsplash.com/photo-1573301564620-7b7d940e7e6c?w=400&h=300&fit=crop"
    }
  ];

  // –ö–æ—Ä–∑–∏–Ω–∞
  let cart = [];

  // –û—Ç–æ–±—Ä–∞–∂–∞–µ–º —Ç–æ–≤–∞—Ä—ã
  function renderProducts() {
    const container = document.getElementById('products-container');
    container.innerHTML = '';

    products.forEach(product => {
      const productCard = document.createElement('div');
      productCard.className = 'product-card';
      productCard.innerHTML = `
                    <img src="${product.image}" alt="${product.name}" class="product-image">
                    <div class="product-title">${product.name}</div>
                    <div class="product-price">${product.price} ‚ÇΩ</div>
                    <button onclick="addToCart(${product.id})" style="margin-top: 10px; padding: 10px; width: 100%; background: #3b82f6; color: white; border: none; border-radius: 8px; cursor: pointer;">
                        –î–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ—Ä–∑–∏–Ω—É
                    </button>
                `;
      container.appendChild(productCard);
    });
  }

  // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ –∫–æ—Ä–∑–∏–Ω—É
  function addToCart(productId) {
    const product = products.find(p => p.id === productId);
    cart.push(product);
    updateCartCounter();

    // –í–∏–±—Ä–æ–æ—Ç–∫–ª–∏–∫ (–µ—Å–ª–∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è)
    if (tg.HapticFeedback) {
      tg.HapticFeedback.impactOccurred('light');
    }
  }

  // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—á–µ—Ç—á–∏–∫–∞ –∫–æ—Ä–∑–∏–Ω—ã
  function updateCartCounter() {
    const counter = document.getElementById('cart-counter');
    counter.textContent = cart.length;
    counter.style.display = cart.length > 0 ? 'flex' : 'none';
  }

  // –û—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞–∫–∞–∑–∞ –±–æ—Ç—É
  function sendOrderToBot() {
    if (cart.length === 0) {
      alert('–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞!');
      return;
    }

    const orderSummary = cart.map(item => `‚Ä¢ ${item.name} - ${item.price} ‚ÇΩ`).join('\n');
    const total = cart.reduce((sum, item) => sum + item.price, 0);

    // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ –±–æ—Ç—É
    tg.sendData(JSON.stringify({
      action: 'create_order',
      products: cart,
      total: total,
      user_id: user?.id,
      timestamp: new Date().toISOString()
    }));

    // –ó–∞–∫—Ä—ã–≤–∞–µ–º Web App
    tg.close();
  }

  // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
  tg.ready();
  renderProducts();

  // –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ç–µ–º—ã Telegram
  function updateTheme() {
    if (tg.colorScheme === 'dark') {
      document.body.style.background = '#1a1a1a';
    }
  }

  tg.onEvent('themeChanged', updateTheme);
  updateTheme();
</script>
</body>
</html>
